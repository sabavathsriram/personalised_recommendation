<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Favorites - ORO</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link href="/css/styles.css" rel="stylesheet">
    <link href="/css/favorites.css" rel="stylesheet">
</head>
<body>
    <!-- Background Effects -->
    <div class="cinema-bg">
        <div class="floating-elements">
            <div class="floating-element movie-reel"><i class="fas fa-film"></i></div>
            <div class="floating-element music-note"><i class="fas fa-music"></i></div>
            <div class="floating-element book-icon"><i class="fas fa-book"></i></div>
            <div class="floating-element star"><i class="fas fa-star"></i></div>
        </div>
        <div class="particle-system"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="brand">
                <i class="fas fa-brain brand-icon"></i>
                <span class="brand-text">ORO</span>
            </div>
            <div class="nav-links">
                <a href="/index" class="nav-link">Home</a>
                <a href="/favorites" class="nav-link active">Favorites</a>
                <a href="/profile" class="nav-link">My Profile</a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="favorites-main">
        <div class="container">
            <!-- Favorites Hero Section -->
            <section class="favorites-hero">
                <div class="hero-content">
                    <h1 class="page-title">
                        <i class="fas fa-heart"></i>
                        My Favorites
                    </h1>
                    <p class="page-subtitle">Your curated collection of movies, books, and music</p>
                </div>
            </section>

            <!-- Favorites Filter Section -->
            <section class="favorites-section">
                <div class="favorites-header">
                    <div class="favorites-filter">
                        <button class="filter-btn active" data-filter="all">
                            <i class="fas fa-th"></i>
                            <span>All</span>
                        </button>
                        <button class="filter-btn" data-filter="movie">
                            <i class="fas fa-film"></i>
                            <span>Movies</span>
                        </button>
                        <button class="filter-btn" data-filter="book">
                            <i class="fas fa-book"></i>
                            <span>Books</span>
                        </button>
                        <button class="filter-btn" data-filter="music">
                            <i class="fas fa-music"></i>
                            <span>Music</span>
                        </button>
                    </div>
                    <div class="favorites-count">
                        <span id="favoritesCount"><%= favorites.length %></span> items
                    </div>
                    <div class="favorites-actions">
                        <button id="personalizedBtn" class="personalized-btn">
                            <i class="fas fa-wand-magic-sparkles"></i>
                            <span>Personalized Picks</span>
                        </button>
                    </div>
                </div>

                <!-- Container to render personalized recommendations -->
                <div id="personalizedResults" class="personalized-results" style="display:none;"></div>

                <!-- Favorites Grid -->
                <div id="favoritesGrid" class="favorites-grid">
                    <% if (favorites && favorites.length === 0) { %>
                        <div class="col-12 text-center empty-state">
                            <div>
                                <i class="fas fa-heart-broken"></i>
                            </div>
                            <h2>No favorites yet.</h2>
                            <p>Add some movies, books, or music to your favorites!</p>
                        </div>
                    <% } else { %>
                        <% favorites.forEach(fav => { %>
                            <div class="col-lg-4 col-md-6 favorite-item" data-type="<%= fav.itemType %>" style="opacity:0; transform: translateY(30px); transition: all 0.5s ease;">
                                <div class="recommendation-card">
                                    <div class="card-glow"></div>
                                    <button class="favorite-btn" 
                                            data-item-type="<%= fav.itemType %>"
                                            data-item-id="<%= fav.itemId %>"
                                            data-title="<%= fav.title %>"
                                            data-poster-url="<%= fav.posterUrl || '' %>">
                                        <i class="fas fa-heart"></i>
                                    </button>
                                    <div class="card-content">
                                        <% if (fav.posterUrl) { %>
                                            <div class="item-cover">
                                                <img src="<%= fav.posterUrl %>" alt="<%= fav.title %>" />
                                            </div>
                                        <% } else { %>
                                            <div class="item-cover">
                                                <i class="fas fa-<%= fav.itemType === 'movie' ? 'film' : fav.itemType === 'book' ? 'book' : 'music' %>"></i>
                                            </div>
                                        <% } %>
                                        <h3><%= fav.title %></h3>
                                        <p><%= fav.itemType.charAt(0).toUpperCase() + fav.itemType.slice(1) %></p>
                                        <div class="genre-tags">
                                            <span class="tag"><%= fav.itemType.charAt(0).toUpperCase() + fav.itemType.slice(1) %></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% }); %>
                    <% } %>
                </div>
            </section>
        </div>
    </main>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/favorites.js"></script>
</body>
</html>